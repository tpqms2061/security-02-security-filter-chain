<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ìš©ì í”„ë¡œí•„ - Filter Chain Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background: linear-gradient(135deg, #FF7043 0%, #FF5722 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            color: #333;
        }
        .header {
            text-align: center;
            color: #D84315;
            margin-bottom: 30px;
            border-bottom: 3px solid #FF7043;
            padding-bottom: 20px;
        }
        .profile-section {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin: 30px 0;
        }
        .profile-card {
            background: #FFF3E0;
            padding: 25px;
            border-radius: 15px;
            border: 1px solid #FFB74D;
            text-align: center;
        }
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #FF7043;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin: 0 auto 15px;
        }
        .profile-details {
            background: #F3E5F5;
            padding: 25px;
            border-radius: 15px;
            border: 1px solid #CE93D8;
        }
        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #E1BEE7;
        }
        .detail-item:last-child {
            border-bottom: none;
        }
        .permission-list {
            background: #E8F5E8;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid #A5D6A7;
        }
        .permission-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
        }
        .permission-check {
            color: #4CAF50;
            margin-right: 10px;
            font-weight: bold;
        }
        .permission-cross {
            color: #F44336;
            margin-right: 10px;
            font-weight: bold;
        }
        .filter-chain-info {
            background: #E3F2FD;
            padding: 20px;
            border-radius: 10px;
            margin: 30px 0;
            border: 1px solid #90CAF9;
        }
        .nav-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
            cursor: pointer;
        }
        .btn-home {
            background: #007bff;
            color: white;
        }
        .btn-home:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        .btn-admin {
            background: #dc3545;
            color: white;
        }
        .btn-admin:hover {
            background: #c82333;
            transform: translateY(-2px);
        }
        .btn-logout {
            background: #6c757d;
            color: white;
        }
        .btn-logout:hover {
            background: #545b62;
        }
        .security-badge {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }
        @media (max-width: 768px) {
            .profile-section {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>ğŸ‘¤ ì‚¬ìš©ì í”„ë¡œí•„</h1>
        <p><span class="security-badge">USER ê¶Œí•œ í•„ìš”</span></p>
    </div>

    <div class="profile-section">
        <!-- í”„ë¡œí•„ ì¹´ë“œ -->
        <div class="profile-card">
            <div class="profile-avatar">
                ğŸ‘¤
            </div>
            <h3 th:text="${username ?: 'Unknown User'}">ì‚¬ìš©ìëª…</h3>
            <p>ì¼ë°˜ ì‚¬ìš©ì</p>
            <div style="margin-top: 15px;">
                    <span style="background: #4CAF50; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                        ğŸ” ì¸ì¦ë¨
                    </span>
            </div>
        </div>

        <!-- ìƒì„¸ ì •ë³´ -->
        <div class="profile-details">
            <h4>ğŸ“‹ ê³„ì • ì •ë³´</h4>
            <div class="detail-item">
                <strong>ì‚¬ìš©ìëª…:</strong>
                <span th:text="${username ?: 'Unknown'}">username</span>
            </div>
            <div class="detail-item">
                <strong>ì ‘ê·¼ ì‹œê°„:</strong>
                <span id="access-time"></span>
            </div>
            <div class="detail-item">
                <strong>ì„¸ì…˜ ìƒíƒœ:</strong>
                <span style="color: #4CAF50;">âœ… í™œì„±</span>
            </div>
            <div class="detail-item">
                <strong>ê¶Œí•œ ë ˆë²¨:</strong>
                <span>USER</span>
            </div>
        </div>
    </div>

    <!-- ê¶Œí•œ ì •ë³´ -->
    <div class="permission-list">
        <h4>ğŸ¯ ì ‘ê·¼ ê°€ëŠ¥í•œ ë¦¬ì†ŒìŠ¤</h4>
        <div class="permission-item">
            <span class="permission-check">âœ…</span>
            <span><strong>/user/**</strong> - ì‚¬ìš©ì ì „ìš© í˜ì´ì§€ë“¤</span>
        </div>
        <div class="permission-item">
            <span class="permission-check">âœ…</span>
            <span><strong>/public/**</strong> - ê³µê°œ í˜ì´ì§€ë“¤</span>
        </div>
        <div class="permission-item">
            <span class="permission-check">âœ…</span>
            <span><strong>/</strong> - í™ˆ í˜ì´ì§€</span>
        </div>
        <div class="permission-item">
            <span class="permission-cross">âŒ</span>
            <span><strong>/admin/**</strong> - ê´€ë¦¬ì ì „ìš© í˜ì´ì§€ë“¤ (ADMIN ê¶Œí•œ í•„ìš”)</span>
        </div>
    </div>

    <!-- í•„í„° ì²´ì¸ ì •ë³´ -->
    <div class="filter-chain-info">
        <h4>ğŸ”— ì´ í˜ì´ì§€ ì ‘ê·¼ ì‹œ ì‹¤í–‰ëœ í•„í„°ë“¤</h4>
        <ol>
            <li><strong>SecurityContextHolderFilter</strong> - ì¸ì¦ ì •ë³´ ë¡œë“œ</li>
            <li><strong>UsernamePasswordAuthenticationFilter</strong> - ë¡œê·¸ì¸ ì²˜ë¦¬</li>
            <li><strong>AnonymousAuthenticationFilter</strong> - ìµëª… ì‚¬ìš©ì ì²´í¬ (Skip)</li>
            <li><strong>AuthorizationFilter</strong> - USER ê¶Œí•œ í™•ì¸ âœ…</li>
            <li><strong>ì»¤ìŠ¤í…€ ë¡œê¹… í•„í„°ë“¤</strong> - ìš”ì²­/ì‘ë‹µ ë¡œê¹…</li>
        </ol>
        <p style="margin-top: 15px; font-style: italic; color: #666;">
            ğŸ’¡ ì½˜ì†”ì—ì„œ "<strong>ğŸ” [FILTER]</strong>" ë¡œê·¸ë¥¼ í™•ì¸í•˜ì—¬ ì‹¤ì œ í•„í„° ì‹¤í–‰ ìˆœì„œë¥¼ ê´€ì°°í•´ë³´ì„¸ìš”!
        </p>
    </div>

    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <div class="nav-buttons">
        <a href="/" class="btn btn-home">ğŸ  í™ˆìœ¼ë¡œ</a>
        <a href="/admin/dashboard" class="btn btn-admin">ğŸ‘¨â€ğŸ’¼ ê´€ë¦¬ì í˜ì´ì§€ (ê¶Œí•œ í…ŒìŠ¤íŠ¸)</a>
    </div>

    <!-- ë¡œê·¸ì•„ì›ƒ -->
    <div style="text-align: center; margin-top: 30px;" sec:authorize="isAuthenticated()">
        <form method="post" action="/logout" style="display: inline;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button type="submit" class="btn btn-logout">ğŸšª ë¡œê·¸ì•„ì›ƒ</button>
        </form>
    </div>

    <div style="text-align: center; margin-top: 20px; color: #666; font-size: 14px;">
        <p>ğŸ›¡ï¸ ì´ í˜ì´ì§€ëŠ” USER ë˜ëŠ” ADMIN ê¶Œí•œì„ ê°€ì§„ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </div>
</div>

<script>
    // í˜„ì¬ ì‹œê°„ í‘œì‹œ
    document.getElementById('access-time').textContent = new Date().toLocaleString('ko-KR');
</script>
</body>
</html>